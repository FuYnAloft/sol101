# 1764C. Doremy's City Construction

graphs, greedy, 1400, https://codeforces.com/problemset/problem/1764/C

Doremy's new city is under construction! The city can be regarded as a simple undirected graph with ğ‘› vertices. The ğ‘–-th vertex has altitude ğ‘ğ‘–. Now Doremy is deciding which pairs of vertices should be connected with edges.

Due to economic reasons, there should be no self-loops or multiple edges in the graph.

Due to safety reasons, there should not be **pairwise distinct** vertices ğ‘¢, ğ‘£, and ğ‘¤ such that $ğ‘_ğ‘¢â‰¤ğ‘_ğ‘£â‰¤ğ‘_ğ‘¤$ and the edges (ğ‘¢,ğ‘£) and (ğ‘£,ğ‘¤) exist.

Under these constraints, Doremy would like to know the maximum possible number of edges in the graph. Can you help her?

Note that the constructed graph is allowed to be disconnected.

**Input**

The input consists of multiple test cases. The first line contains a single integer $t (1â‰¤ğ‘¡â‰¤10^4)$ â€” the number of test cases. The description of the test cases follows.

The first line of each test case contains a single integer $n (2â‰¤ğ‘›â‰¤2â‹…10^5)$ â€” the number of vertices.

The second line of each test case contains ğ‘› integers $ğ‘_1,ğ‘_2,â€¦,ğ‘_ğ‘› (1â‰¤ğ‘_ğ‘–â‰¤10^6)$ â€” the altitudes of each vertex.

It is guaranteed that the sum of ğ‘› over all test cases does not exceed $2â‹…10^5$.

**Output**

For each test case, output the maximum possible number of edges in the graph.

Example

input

```
4
4
2 2 3 1
6
5 2 3 1 5 2
12
7 2 4 9 1 4 6 3 7 4 2 3
4
1000000 1000000 1000000 1000000
```

output

```
3
9
35
2
```

Note

In the first test case, there can only be at most 33 edges in the graph. A possible construction is to connect (1,3), (2,3), (3,4). In the picture below the red number above node ğ‘– is ğ‘ğ‘–.

![img](https://raw.githubusercontent.com/GMyhf/img/main/img/1418c24979440d1a012429347170871195054446.png)

The following list shows all such ğ‘¢, ğ‘£, ğ‘¤ that the edges (ğ‘¢,ğ‘£) and (ğ‘£,ğ‘¤) exist.

- ğ‘¢=1, ğ‘£=3, ğ‘¤=2;
- ğ‘¢=1, ğ‘£=3, ğ‘¤=4;
- ğ‘¢=2, ğ‘£=3, ğ‘¤=1;
- ğ‘¢=2, ğ‘£=3, ğ‘¤=4;
- ğ‘¢=4, ğ‘£=3, ğ‘¤=1;
- ğ‘¢=4, ğ‘£=3, ğ‘¤=2.

Another possible construction is to connect (1,4), (2,4), (3,4).

![img](https://raw.githubusercontent.com/GMyhf/img/main/img/115580187374dcfe66c47f2d96ac1755b4df4d3d.png)

An unacceptable construction is to connect (1,3), (2,3), (2,4), (3,4. Because when ğ‘¢=4, ğ‘£=2, ğ‘¤=3, $ğ‘_ğ‘¢â‰¤ğ‘_ğ‘£â‰¤ğ‘_ğ‘¤$ holds, and the respective edges exist.

![img](https://raw.githubusercontent.com/GMyhf/img/main/img/a030082fa80a298932acf8c816dcb70e2a123219.png)



æ€è·¯: è¦æ»¡è¶³æ¡ä»¶ï¼Œå…ˆå°†ç‚¹æƒæ’åºï¼Œè®¾ä¸€ä¸ªç‚¹ iï¼Œé‚£ä¹ˆå®ƒæ»¡è¶³å‰é¢çš„æ•°éƒ½å°äºç­‰äºå®ƒï¼Œåé¢çš„æ•°éƒ½å¤§äºç­‰äºå®ƒã€‚é‚£ä¹ˆå°±ä¼šæœ‰ä¸€ä¸ªè´ªå¿ƒæ–¹æ¡ˆï¼Œä»¥è¿™ä¸ªç‚¹ä¸ºåˆ†æ®µç‚¹ï¼Œåé¢çš„æ‰€æœ‰ç‚¹ä¸å®ƒè¿è¾¹åå†ä¸è¿™ä¸ªç‚¹å‰é¢çš„ç‚¹è¿è¾¹ï¼Œè¿™æ ·èƒ½å¤Ÿæ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œä¸”æ–¹æ¡ˆæ•°ä¹Ÿè¶Šå¤§ï¼Œä½†å‰ææ˜¯æ²¡æœ‰ä¸å®ƒç›¸ç­‰çš„ç‚¹ã€‚

æ‰€ä»¥ç­”æ¡ˆå°±ä¸º $max\{iÃ—(nâˆ’i)\}$ã€‚

æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œæ ·ä¾‹ä¸­ç¬¬ 4 ä¸ªè¿‡ä¸å»ï¼ŒåŸå› æ˜¯æ¯ä¸ªç‚¹éƒ½ä¸ i ç›¸ç­‰ï¼Œé‚£ä¹ˆæ–¹æ¡ˆå°±æ˜¯ä¸¤ä¸¤ç›¸è¿ï¼Œç­”æ¡ˆå³ä¸º 
$âŒŠ\frac{n}{2}âŒ‹$

ã€æçŸ³æ³‰-å…‰å-23ã€‘å°±æ˜¯ä¸€ä¸ªå»ºç­‘æŒ‰ç…§é«˜åº¦è¦ä¹ˆå…¨å»ºå‘ä¸Šçš„è·¯æˆ–è€…å‘ä¸‹çš„è·¯æˆ–è€…åŒé«˜åº¦çš„ä¸€æ¡è·¯ã€‚



```python
for i in range(int(input())):
    n = int(input())
    L = sorted(list(map(int, input().split())))
    ans = n//2
    for i in range(1, len(L)):
        if L[i] != L[i-1]:
            ans = max(ans, i*(n-i))
    print(ans)
```



æ’åºåï¼Œä»ä¸­é—´ä½ç½®å¼€å§‹å¾€å·¦ä¸€æ­¥ï¼Œå¾€å³ä¸€æ­¥ï¼Œæ‰¾ç¬¬ä¸€ä¸ªä¸ä¸­é—´å€¼ä¸åŒçš„ç‚¹ã€‚

```python
t = int(input())
ans = []
for _ in range(t):
    n = int(input())
    altitude = list(map(int, input().split()))
    altitude.sort()

    mid = n//2
    if altitude[0] ==  altitude[-1] == altitude[mid]:
        ans.append(mid)
        continue

    cut = 1
    for i in range(1, (n+1)//2):
        if altitude[mid-i] != altitude[mid]:
            cut = mid - i + 1
            break
        elif altitude[mid+i] != altitude[mid]:
            cut = mid + i
            break
    ans.append(cut*(n-cut))

print('\n'.join(map(str, ans)))
```



```python
# 1764C
t = int(input())
ans = []
for _ in range(t):
    N = int(input())
    a = list(map(int, input().split()))
    a.sort()
    
    mid = N//2
    if a[0] == a[-1] == a[mid]:
        ans.append(mid)
        continue

    b = a[::-1]       # b=sorted(a,reverse=True)
    x = a.index(a[mid])
    y = b.index(a[mid])
    ans.append(max(x*(N-x), y*(N-y)))
    #print(max( x*(N-x), y*(N-y), N//2))
print('\n'.join(map(str, ans)))
```



<img src="https://raw.githubusercontent.com/GMyhf/img/main/img/image-20231031103020073.png" alt="image-20231031103020073" style="zoom:50%;" />


