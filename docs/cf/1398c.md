# 1398C. Good Subarrays

data structures, dp, math, 1600, https://codeforces.com/contest/1398/problem/C

You are given an array ğ‘1,ğ‘2,â€¦,ğ‘ğ‘› consisting of integers from 0 to 9. A subarray ğ‘ğ‘™,ğ‘ğ‘™+1,ğ‘ğ‘™+2,â€¦,ğ‘ğ‘Ÿâˆ’1,ğ‘ğ‘Ÿ is good if the sum of elements of this subarray is equal to the length of this subarray ($âˆ‘_{ğ‘–=ğ‘™}^{ğ‘Ÿ}ğ‘ğ‘–=ğ‘Ÿâˆ’ğ‘™+1$).

For example, if ğ‘=[1,2,0], then there are 3 good subarrays: ğ‘1â€¦1=[1],ğ‘2â€¦3=[2,0] and ğ‘1â€¦3=[1,2,0].

Calculate the number of good subarrays of the array ğ‘.

**Input**

The first line contains one integer ğ‘¡ (1â‰¤ğ‘¡â‰¤1000) â€” the number of test cases.

The first line of each test case contains one integer ğ‘› (1â‰¤ğ‘›â‰¤10^5) â€” the length of the array ğ‘.

The second line of each test case contains a string consisting of ğ‘› decimal digits, where the ğ‘–-th digit is equal to the value of ğ‘ğ‘–.

It is guaranteed that the sum of ğ‘› over all test cases does not exceed 10^5.

**Output**

For each test case print one integer â€” the number of good subarrays of the array ğ‘.

Example

input

```
3
3
120
5
11011
6
600005
```

output

```
3
6
1
```

Note

The first test case is considered in the statement.

In the second test case, there are 6 good subarrays: ğ‘1â€¦1, ğ‘2â€¦2, ğ‘1â€¦2, ğ‘4â€¦4, ğ‘5â€¦5 and ğ‘4â€¦5.

In the third test case there is only one good subarray: ğ‘2â€¦6.





```python
# è’‹å­è½©23å·¥å­¦é™¢
for _ in range(int(input())):
    n = int(input())
    arr = input()
    cnt = [0] * (8 * n + 1)
    cnt[0] = 1
    total = 0
    sum = 0
    # é€šè¿‡åœ¨éå†æ—¶å¯¹æ•°å­—å‡1å¹¶ç´¯åŠ æ„é€ ä¸€ä¸ªâ€™å‡å»äº†é•¿åº¦çš„å‰ç¼€å’Œâ€˜
    for num in arr:
        sum += int(num) - 1
        # å·²éå†çš„ä½ç½®ä¸­ä¸å½“å‰å‰ç¼€å’Œç›¸ç­‰çš„ä½ç½®æ•°å³æ–°å¢çš„good subarrayä¸ªæ•°
        total += cnt[sum]
        cnt[sum] += 1
    print(total)
```



èƒ¡ç¿è¯šï¼šä¸è¿™ä¸ªé¢˜ç›®ç±»ä¼¼ï¼Œ27141:å®Œç¾çš„çˆ±ï¼Œhttp://cs101.openjudge.cn/practice/27141/ã€‚æå‰ç¼€å’ŒSk,è¦æ±‚å°±æ˜¯Sk-Sl=520(k-l)ã€‚



è¿™æ®µä»£ç ä¸­çš„ `x(x-1)/2` æ˜¯ä¸ºäº†è®¡ç®—å…·æœ‰ç›¸åŒ `p[i] - i` å€¼çš„å‰ç¼€çš„ç»„åˆæ•°ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹ `p[i]` çš„å«ä¹‰ã€‚åœ¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é›¶ç´¢å¼•ï¼ˆzero indexingï¼‰ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨åŠå¼€åŒºé—´ï¼ˆhalf-closed intervalï¼‰ï¼Œå³å­æ•°ç»„ `[l, r)` è¡¨ç¤ºä¸º `a[l], a[l+1], ..., a[r-1]`ã€‚

æˆ‘ä»¬é¢„å…ˆè®¡ç®—æ•°ç»„ `p`ï¼Œå…¶ä¸­ `p[i]` è¡¨ç¤º `a[0]` åˆ° `a[i-1]` çš„å…ƒç´ ä¹‹å’Œã€‚æ¢å¥è¯è¯´ï¼Œ`p[i]` æ˜¯ `a` çš„å‰ `i` ä¸ªå…ƒç´ çš„ç´¯åŠ å’Œã€‚

ç„¶åï¼Œå½“ä¸”ä»…å½“ `p[r] - p[l] = r - l` æ—¶ï¼Œå­æ•°ç»„ `[l, r)` æ‰æ˜¯å¥½çš„ï¼ˆå³æ»¡è¶³æ¡ä»¶çš„ï¼‰å­æ•°ç»„ã€‚æ¢å¥è¯è¯´ï¼Œ`p[r] - r = p[l] - l`ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§ `p[i] - i` çš„å€¼å°†æ‰€æœ‰å‰ç¼€åˆ†ç»„ï¼Œå¯¹äºå…·æœ‰ç›¸åŒ `p[i] - i` å€¼çš„å‰ç¼€ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å®ƒä»¬çš„ç»„åˆæ•°ã€‚

è€Œç»„åˆæ•°å…¬å¼ä¸º `C(x, 2) = x(x-1)/2`ï¼Œè¡¨ç¤ºä» `x` ä¸ªå…ƒç´ ä¸­é€‰æ‹© 2 ä¸ªå…ƒç´ çš„ç»„åˆæ•°ã€‚

å› æ­¤ï¼Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®å…·æœ‰ç›¸åŒ `p[i] - i` å€¼çš„å‰ç¼€çš„æ•°é‡ `x`ï¼Œå°† `x(x-1)/2` æ·»åŠ åˆ°ç­”æ¡ˆä¸­ã€‚

è¿™æ ·åšçš„ç›®çš„æ˜¯è®¡ç®—å…·æœ‰ç›¸åŒ `p[i] - i` å€¼çš„å‰ç¼€çš„æ‰€æœ‰å¯èƒ½ç»„åˆæ•°ï¼Œä»¥æ»¡è¶³é—®é¢˜çš„è¦æ±‚ã€‚

å¸Œæœ›è¿™æ ·è§£é‡Šèƒ½å¤Ÿå¸®åŠ©ä½ ç†è§£è¿™æ®µä»£ç çš„å«ä¹‰ã€‚å¦‚æœ‰éœ€è¦ï¼Œè¯·éšæ—¶æé—®ã€‚

```python
#for s in [*open(0)][2::2]:
for _ in range(int(input())):
    input()
    s = input()
    a = [1]+len(s)*8*[0]
    i = t = 0
    #for x in s[:-1]:
    for x in s:
        i += 1
        t += int(x)
        a[t-i] += 1
    print(sum(x*(x-1)//2 for x in a))
```


