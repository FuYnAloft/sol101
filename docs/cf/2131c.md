# 2131C. Make it Equal

math, number theory, *1100, https://codeforces.com/problemset/problem/2131/C   

Given two [multisets](https://en.wikipedia.org/wiki/Multiset) ğ‘† and ğ‘‡ of size ğ‘› and a positive integer ğ‘˜, you may perform the following operations any number (including zero) of times on ğ‘†:

- Select an element ğ‘¥ in ğ‘†, and remove one occurrence of ğ‘¥ in ğ‘†. Then, either insert ğ‘¥+ğ‘˜ into ğ‘†, or insert |ğ‘¥âˆ’ğ‘˜| into ğ‘†.

Determine if it is possible to make ğ‘† equal to ğ‘‡. Two multisets ğ‘† and ğ‘‡ are equal if every element appears the same number of times in ğ‘† and ğ‘‡.

**Input**

Each test contains multiple test cases. The first line contains an integer ğ‘¡ (1â‰¤ğ‘¡â‰¤104) â€” the number of test cases. The description of the test cases follows.

The first line contains two integers ğ‘› and ğ‘˜ (1â‰¤ğ‘›â‰¤2â‹…105, 1â‰¤ğ‘˜â‰¤109) â€” the size of ğ‘† and the constant, respectively.

The second line contains ğ‘› integers ğ‘†1,ğ‘†2,â€¦,ğ‘†ğ‘› (0â‰¤ğ‘†ğ‘–â‰¤109) â€” the elements in ğ‘†.

The third line contains ğ‘› integers ğ‘‡1,ğ‘‡2,â€¦,ğ‘‡ğ‘› (0â‰¤ğ‘‡ğ‘–â‰¤109) â€” the elements in ğ‘‡.

It is guaranteed that the sum of ğ‘› over all test cases does not exceed 2â‹…105.

**Output**

For each test case, output "YES" if it is possible to make ğ‘† equal to ğ‘‡, and "NO" otherwise.

You can output the answer in any case (upper or lower). For example, the strings "yEs", "yes", "Yes", and "YES" will be recognized as positive responses.

Example

Input

```
5
1 3
1
2
1 8
4
12
3 5
6 2 9
8 4 11
2 7
2 8
2 9
3 2
0 1 0
1 0 1
```

Output

```
YES
YES
YES
NO
NO
```

Note

In the first test case, we can remove one occurrence of 1 from ğ‘† and insert |1âˆ’ğ‘˜|=|1âˆ’3|=2 into ğ‘†, making ğ‘† equal to ğ‘‡.

In the second test case, we can remove one occurrence of 4 from ğ‘† and insert 4+ğ‘˜=4+8=12 into ğ‘†, making ğ‘† equal to ğ‘‡.

In the last test case, we can show that it is impossible to make ğ‘† equal to ğ‘‡.



è¿™ä¸ªé¢˜åœ¨ Codeforces ä¸Šæ˜¯ **é«˜æ•°æ®é‡ + ä¸¥æ ¼æ—¶é—´** çš„å…¸å‹é¢˜ã€‚ç”¨pythonçš„åŒ–ï¼Œéš¾åº¦ä¸æ­¢1100ã€‚

**æ ¸å¿ƒè§„å¾‹**

æ“ä½œè§„åˆ™ï¼š

- ä» `x` å¯ä»¥å˜æˆ `x + k` æˆ– `|x - k|`ã€‚

æ‰€ä»¥å…ƒç´ èƒ½ä¸èƒ½äº’ç›¸è½¬åŒ–ï¼Œå…³é”®åœ¨äº **æ¨¡ k çš„ä½™æ•°**ã€‚

- å› ä¸ºä¸ç®¡ä½ åŠ /å‡ `k`ï¼Œä½™æ•°å§‹ç»ˆä¿æŒä¸å˜ã€‚
- å”¯ä¸€ä¾‹å¤–ï¼šå¦‚æœ `x < k`ï¼Œåš `|x - k|` ä¼šå˜æˆ `k - x`ï¼Œä½™æ•°å‘ç”Ÿäº†å¯¹ç§°å˜åŒ–ã€‚

æ¯”å¦‚ï¼š

- `x = 2, k = 7` â†’ `|2 - 7| = 5`ã€‚ä½™æ•° `2` â†” `5`ã€‚
- æ‰€ä»¥ä¸€ä¸ªæ•°çš„ä½™æ•°å¯ä»¥æ˜¯ `r` æˆ– `k - r`ã€‚

è¿›ä¸€æ­¥ç®€åŒ–ï¼š

- æ¯ä¸ªå…ƒç´ æœ€ç»ˆåªèƒ½å½’ç±»åˆ° `[0, k//2]` è¿™ä¸ªåŒºé—´é‡Œçš„ä¸€ä¸ªâ€œä»£è¡¨ä½™æ•°â€ã€‚
  - å¦‚æœ `r <= k//2`ï¼Œå°±å½’ç±»åˆ° `r`ï¼›
  - å¦‚æœ `r > k//2`ï¼Œå°±å½’ç±»åˆ° `k - r`ã€‚
- ç„¶ååªè¦ä¸¤ä¸ª multiset çš„å½’ç±»è®¡æ•°å®Œå…¨ä¸€è‡´ï¼Œå°±èƒ½ç›¸äº’è½¬åŒ–ã€‚

------

**è§£æ³•**

1. æŠŠ `S` å’Œ `T` ä¸­çš„æ¯ä¸ªå…ƒç´ è½¬æˆ â€œä»£è¡¨ä½™æ•°â€ã€‚
2. ç»Ÿè®¡å„ä»£è¡¨ä½™æ•°çš„å‡ºç°æ¬¡æ•°ã€‚
3. ä¸¤è¾¹ç»Ÿè®¡ç»“æœç›¸ç­‰ â†’ YESï¼Œå¦åˆ™ NOã€‚

------

æç¬‘ç‰ˆï¼š I/O å’Œç®€æ´ï¼Œä¸ç”¨å­—å…¸ï¼Œæ’åºã€‚

```python
import sys
input = sys.stdin.readline

def normalize(arr, k):
    w = k // 2
    return sorted((r if r <= w else k - r) for r in (x % k for x in arr))

t = int(input())
out = []
for _ in range(t):
    n, k = map(int, input().split())
    s = list(map(int, input().split()))
    t_ = list(map(int, input().split()))
    if normalize(s, k) == normalize(t_, k):
        out.append("YES")
    else:
        out.append("NO")

sys.stdout.write("\n".join(out))
```



sorted æ¯”è¾ƒï¼šPython çš„ sort æ˜¯ç”¨ C è¯­è¨€å®ç°çš„ï¼ˆTimsortï¼‰ï¼Œéå¸¸é«˜æ•ˆã€‚ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªåˆ—è¡¨ list1 == list2 ä¹Ÿæ˜¯ C å±‚é¢çš„æ“ä½œï¼Œé€šå¸¸æ¯”æ‰‹åŠ¨æ„å»º Counter å“ˆå¸Œè¡¨è¦å¿«ï¼ˆä¸”çœå»äº†å“ˆå¸Œè®¡ç®—çš„æ—¶é—´ï¼‰ã€‚

```python
#from collections import Counter

def inta(i):
    a = int(i) % k
    return a if a <= k // 2 else k - a


for _ in range(int(input())):
    n, k = map(int, input().split())
    # li1 = Counter(list(map(inta, input().split())))
    # li2 = Counter(list(map(inta, input().split())))
    li1 = sorted(list(map(inta, input().split())))
    li2 = sorted(list(map(inta, input().split())))
    print('YES' if li1 == li2 else 'NO')


```





C++æ™®é€šå†™æ³•å°±å¯ä»¥AC

```c++
#include <iostream>
#include <vector>
#include <map>
using namespace std;

// å‡½æ•° foï¼šè®¡ç®—æ¨¡ k åçš„å¯¹ç§°é¢‘æ¬¡
map<int, int> fo(const vector<int>& s, int n, int k) {
    int w = k / 2;
    map<int, int> a;
    for (int i : s) {
        int r = i % k;
        if (r <= w) {
            a[r]++;
        } else {
            a[k - r]++;
        }
    }
    return a;
}

// å‡½æ•° eqï¼šæ¯”è¾ƒä¸¤ä¸ªåºåˆ—ç»è¿‡ fo å¤„ç†åæ˜¯å¦ç›¸ç­‰
bool eq(const vector<int>& s, const vector<int>& t, int n, int k) {
    map<int, int> a = fo(s, n, k);
    map<int, int> b = fo(t, n, k);
    return a == b;
}

int main() {
    int m;
    cin >> m;

    for (int q = 0; q < m; ++q) {
        int n, k;
        cin >> n >> k;

        vector<int> s(n);
        vector<int> t(n);

        for (int i = 0; i < n; ++i) {
            cin >> s[i];
        }
        for (int i = 0; i < n; ++i) {
            cin >> t[i];
        }

        if (eq(s, t, n, k)) {
            cout << "YES" << endl;
        } else {
            cout << "NO" << endl;
        }
    }

    return 0;
}
```


