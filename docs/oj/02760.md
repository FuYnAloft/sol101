# M02760: æ•°å­—ä¸‰è§’å½¢

dp, dfs, http://cs101.openjudge.cn/practice/02760

```
       7
     3   8
    8   1   0
  2   7   4   4
4   5   2   6   5

      (å›¾1)
```

å›¾1ç»™å‡ºäº†ä¸€ä¸ªæ•°å­—ä¸‰è§’å½¢ã€‚ä»ä¸‰è§’å½¢çš„é¡¶éƒ¨åˆ°åº•éƒ¨æœ‰å¾ˆå¤šæ¡ä¸åŒçš„è·¯å¾„ã€‚å¯¹äºæ¯æ¡è·¯å¾„ï¼ŒæŠŠè·¯å¾„ä¸Šé¢çš„æ•°åŠ èµ·æ¥å¯ä»¥å¾—åˆ°ä¸€ä¸ªå’Œï¼Œä½ çš„ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°æœ€å¤§çš„å’Œã€‚

æ³¨æ„ï¼šè·¯å¾„ä¸Šçš„æ¯ä¸€æ­¥åªèƒ½ä»ä¸€ä¸ªæ•°èµ°åˆ°ä¸‹ä¸€å±‚ä¸Šå’Œå®ƒæœ€è¿‘çš„å·¦è¾¹çš„é‚£ä¸ªæ•°æˆ–è€…å³è¾¹çš„é‚£ä¸ªæ•°ã€‚

**è¾“å…¥**

è¾“å…¥çš„æ˜¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°N (1 < N  â‰¤â€‰  100)ï¼Œç»™å‡ºä¸‰è§’å½¢çš„è¡Œæ•°ã€‚ä¸‹é¢çš„Nè¡Œç»™å‡ºæ•°å­—ä¸‰è§’å½¢ã€‚æ•°å­—ä¸‰è§’å½¢ä¸Šçš„æ•°çš„èŒƒå›´éƒ½åœ¨0å’Œ100ä¹‹é—´ã€‚

**è¾“å‡º**

è¾“å‡ºæœ€å¤§çš„å’Œã€‚

æ ·ä¾‹è¾“å…¥

```
5
7
3 8
8 1 0 
2 7 4 4
4 5 2 6 5
```

æ ·ä¾‹è¾“å‡º

```
30
```

æ¥æºï¼šç¿»è¯‘è‡ª IOI 1994 çš„è¯•é¢˜



**è¦æ±‚è‡ªåº•å‘ä¸ŠDPå®ç°ä¸€æ¬¡ï¼Œé€’å½’+è®°å¿†åŒ–æœç´¢å®ç°ä¸€æ¬¡**

2020fall-cs101ï¼Œè“å…‹è½©ã€‚

dpæ–¹æ³•ï¼šç”¨2d listè®°å½•ä¸‰è§’å½¢ï¼Œç„¶åä»å€’æ•°ç¬¬äºŒæ’å¼€å§‹æ›´æ”¹ï¼Œå°†æ¯ä¸ªæ•°æ”¹æˆä¸‹é¢ä¸¤ä¸ªå¯ä»¥åŠ ä¸Šçš„æ•°çš„æœ€å¤§å’Œï¼Œå°±èƒ½å¾€ä¸Šæ¨å‡ºæœ€å¤§è·¯å¾„ã€‚

```python
n = int(input())
tri = []   # triangle

for i in range(n):
    tri.append(list(map(int, input().split()))+[0 for j in range(n-i-1)])

for i in range(n-2,-1,-1):
    for j in range(i+1):
        tri[i][j] += max(tri[i+1][j], tri[i+1][j+1])

print(tri[0][0])
```



é€’å½’+è®°å¿†åŒ–æœç´¢

```python
from functools import lru_cache

n = int(input())
triangle = [list(map(int, input().split())) for _ in range(n)]

@lru_cache(None)
def dfs(i, j):
    if i == n - 1:   # åˆ°åº•å±‚
        return triangle[i][j]
    return triangle[i][j] + max(dfs(i + 1, j), dfs(i + 1, j + 1))

print(dfs(0, 0))

```



2020fall-cs101ï¼Œæå˜‰é’°ã€‚

è§£é¢˜æ€è·¯ï¼šä»ä¸‰è§’å½¢çš„æœ€åº•å±‚å¼€å§‹å¾€ä¸Šèµ°ï¼Œç›¸é‚»çš„ä¸¤ä¸ªæ•°å­—åªæœ‰å€¼è¾ƒå¤§è€…å¯ä»¥å‘ä¸Šèµ°ï¼Œå¹¶ä¸”å’Œä¸Šå±‚çš„æ•°å­—ç»“åˆï¼Œå€¼è¾ƒå°è€…è¢«æ·˜æ±°ã€‚æœ€åï¼Œåœ¨ä¸‰è§’å½¢é¡¶ç«¯çš„æ•°å­—å°±æ˜¯æ‰€æœ‰è·¯å¾„ä¸­çš„æœ€å¤§å’Œã€‚

```python
n = int(input())
tri = []   # triangle

for i in range(n):    
    tri.append([int(x) for x in input().split()])

for i in range(n-1, 0, -1):    
    for x in range(len(tri[i-1])):        
        tri[i-1][x] = max(tri[i-1][x] + tri[i][x], tri[i-1][x] + tri[i][x+1])

print(tri[0][0])
```

2020fall-cs101ï¼Œé˜šç«‹è¨€

è§£é¢˜æ€è·¯ï¼šä»ä¸Šå¾€ä¸‹Top-downã€‚

```python
n = int(input())
tri = [[0]+[int(_) for _ in input().split()]+[0] for i in range(n)]
for i in range(1,n):
        for key in range(1,i+2):
                tri[i][key] += max(tri[i-1][key-1], tri[i-1][key])
print(max(tri[n-1]))
```



2020fall-cs101ï¼Œå­™æ¹›åŠ¼

æ˜¾ç„¶è´ªå¿ƒæ˜¯è¡Œä¸é€šçš„ï¼Œæ‰€ä»¥è€ƒè™‘ dpã€‚è®°$S_{i,j}$ ä¸ºä»¥ç¬¬ $ (ğ‘–,ğ‘—)$  ä½ç½®çš„å…ƒç´ ç»“å°¾çš„è·¯å¾„çš„å’Œçš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆå¯¹ä¸€ä¸ª $ (ğ‘–,ğ‘—)$  ä½ç½®çš„æ•°ï¼Œä»–å¯ä»¥æ¥åœ¨ $(ğ‘–-1,ğ‘—-1)$ å’Œ $(ğ‘–-1,ğ‘—)$   çš„åé¢ï¼Œé‚£ä¹ˆå°±å¾—åˆ°äº† dpæ–¹ç¨‹$ğ‘†_{ğ‘–,ğ‘—}=max\{ğ‘†_{ğ‘–-1,ğ‘—-1}, ğ‘†_{ğ‘–-1,ğ‘—}\} + ğ‘_{ğ‘–,ğ‘—}$

```python
N = int (input())
S = []
for i in range (N):    
    S.append([int (x) for x in input().split()])
    
ans = [[S[0][0]]]
for i in range (1,N):    
    SS = []
    for j in range (i+1):
        if j==0:            
            SS.append(ans[i-1][0]+S[i][0])
        if 1<=j<=i-1:            
            SS.append(max(ans[i-1][j-1],ans[i-1][j])+S[i][j])
        if j==i:            
            SS.append(ans[i-1][i-1]+S[i][j])    
    ans.append(SS.copy())
    
print (max(ans[N-1]))
```

dp+dfsæ–¹æ³•

```python
n = int(input())

node = []
node.append( [-1 for _ in range(n+2)] )
for _ in range(n):
    tmp = [int(_) for _ in input().split()]
    node.append([-1] +tmp + [-1]*(n - len(tmp)) + [-1])
    
node.append( [-1 for _ in range(n+2)] )

opt = [[0]*(n+2) for _ in range(n+2)]

def dp(i,j):
    if opt[i][j]>0:
        return opt[i][j]
    
    if node[i+1][j]==-1 or node[i+1][j+1]==-1 :
        return node[i][j]
    
    opt[i][j] = node[i][j] + max( dp(i+1, j), dp(i+1, j+1) )
    return opt[i][j]

ans = 0
for i in range(1, n+1):
    for j in range(1, n+1):
        ans = max( ans, dp(i,j) )

print(ans)
```



2020fall-cs101ï¼Œç« æ–¯å²šã€‚è¿™ç§é¢˜ç›®å°½é‡ä¸ç”¨äºŒç»´æ•°ç»„å¯ä»¥ä½¿ä»£ç ç®€åŒ–ã€‚ç›´æ¥å¼€ä¸€ä¸ªä¸€ç»´æ•°ç»„å°±å¯ä»¥è§£å†³å­˜å‚¨é—®é¢˜ï¼ˆæ¯ä¸€å±‚å­˜å‚¨åéƒ½å¯ä»¥ä¸¢å¼ƒï¼‰

```python
a = []
dp = [0]*102
for i in range(int(input())):
    a.append(list(map(int,input().split())))
a = a[::-1] 
for i in a:
    for j in range(len(i)):
        dp[j] = max(dp[j+1], dp[j]) +i[j]
print(dp[0])
```


