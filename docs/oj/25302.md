# M25302: æœ€å¤§å¹¶å‘é‡

greedy, http://cs101.openjudge.cn/practice/25302

äº’è”ç½‘å…¬å¸å¤§å®¶ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚ç¤¾äº¤appçš„åå°ï¼Œéƒ½ä¼šè€ƒè™‘ç”¨æˆ·è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘é‡ï¼Œå°±æ˜¯åŒä¸€æ—¶åˆ»çš„æœ€å¤§è¿æ¥æ•°ã€‚

ç°åœ¨ç»™å‡ºä¸€äº›çš„å¼€å§‹æ—¶é—´å’Œæ–­å¼€æ—¶é—´ï¼Œé—®è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ€å¤§çš„å¹¶å‘é‡æœ‰å¤šå°‘ã€‚

å¦‚æœä¸€ä¸ªè¿æ¥åœ¨ x æ—¶åˆ»å¼€å§‹ï¼Œå¦ä¸€ä¸ªè¿æ¥åœ¨ x æ—¶åˆ»ç»“æŸï¼Œè®¤ä¸º x æ—¶åˆ»å¹¶å‘é‡æ˜¯ 1ï¼Œè€Œä¸æ˜¯ 2.

**è¾“å…¥**

ç¬¬ä¸€è¡Œæ˜¯ tï¼Œt <= 100ï¼Œä»£è¡¨æ•°æ®ç»„æ•°ã€‚
å¯¹äºæ¯ç»„æ•°æ®ï¼Œç¬¬ä¸€è¡Œæ˜¯ nï¼Œ1 <= n <= 100ï¼Œä»£è¡¨æœ‰ n ä¸ªè¿æ¥ï¼Œ
æ¥ä¸‹æ¥ n è¡Œï¼Œæ¯ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•° x, y ï¼Œ0 <= x < y <= 10^9ï¼Œä»£è¡¨è¿æ¥çš„å¼€å§‹æ—¶é—´æ˜¯ xï¼Œæ–­å¼€æ—¶é—´æ˜¯ yã€‚

**è¾“å‡º**

å¯¹äºæ¯ç»„æ•°æ®è¾“å‡ºä¸€è¡Œï¼Œä»£è¡¨æœ€å¤§å¹¶å‘é‡ã€‚

æ ·ä¾‹è¾“å…¥

```
2
2
1 2
2 3
2
1 3
2 4
```

æ ·ä¾‹è¾“å‡º

```
1
2
```

æ¥æºï¼š2016fall-cs101



å…¸å‹çš„**åŒºé—´åˆå¹¶ä¸å¹¶å‘è®¡æ•°é—®é¢˜**ï¼Œé€‚åˆç”¨æ‰«æçº¿ç®—æ³•ï¼ˆsweep lineï¼‰è§£å†³ã€‚

âœ… **é¢˜æ„è§£è¯»**

- ç»™ä½ è‹¥å¹²ä¸ªè¿æ¥çš„å¼€å§‹å’Œæ–­å¼€æ—¶é—´ï¼Œé—®åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­â€œ**åŒä¸€æ—¶åˆ»æœ€å¤šæœ‰å¤šå°‘ä¸ªè¿æ¥æ˜¯æ´»è·ƒçš„**â€ã€‚
- ç‰¹åˆ«æ³¨æ„ï¼š
  - å¦‚æœä¸€ä¸ªè¿æ¥åœ¨ `x` æ—¶åˆ»å¼€å§‹ï¼Œå¦ä¸€ä¸ªè¿æ¥åœ¨ `x` æ—¶åˆ»æ–­å¼€ï¼Œ`x` æ—¶åˆ»çš„å¹¶å‘æ˜¯ **1**ï¼ˆä¸æ˜¯ 2ï¼‰ã€‚
  - æ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºï¼šâ€œç»“æŸå…ˆäºå¼€å§‹â€åœ¨åŒä¸€æ—¶åˆ»ã€‚

------

âœ… **è§£å†³æ–¹æ¡ˆè§£æ**

ğŸ§  **æ ¸å¿ƒæ€è·¯ï¼šæ‰«æçº¿**

æŠŠæ¯ä¸ªæ—¶é—´ç‚¹è§†ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼š

- å¼€å§‹è¿æ¥ï¼š`(x, +1)`
- ç»“æŸè¿æ¥ï¼š`(y, -1)`

ç„¶åå°†æ‰€æœ‰äº‹ä»¶æŒ‰æ—¶é—´æ’åºå¤„ç†ã€‚

- è‹¥æ—¶é—´ç›¸åŒï¼Œä¼˜å…ˆå¤„ç† `-1`ï¼ˆæ–­å¼€ï¼‰ï¼Œé¿å…å¹¶å‘è¯¯å¢ã€‚

â±ï¸ **æ—¶é—´å¤æ‚åº¦**

- æ¯ç»„ï¼šæ’åº O(n log n)ï¼Œéå† O(n)



æ¨¡æ‹Ÿæ¥å…¥ï¼ˆ+1ï¼‰ã€æ–­å¼€ï¼ˆ-1ï¼‰çš„åŠ¨æ€è¿‡ç¨‹ï¼Œè€Œæœ€å¤§å¹¶å‘é‡å°±æ˜¯è¿™ä¸€è¿‡ç¨‹ä¸­èƒ½è¾¾åˆ°çš„æœ€å¤§çš„æ•°ã€‚

```python
def max_concurrent_connections(n, intervals):
    events = []
    for start, end in intervals:
        events.append((start, 1))  # å¼€å§‹ +1
        events.append((end, -1))   # ç»“æŸ -1

    # æŒ‰æ—¶é—´æ’åºï¼Œæ—¶é—´ç›¸åŒæ—¶ç»“æŸäº‹ä»¶åœ¨å‰
    events.sort(key=lambda x: (x[0], x[1]))

    current = 0
    max_concurrent = 0
    for time, delta in events:
        current += delta
        max_concurrent = max(max_concurrent, current)

    return max_concurrent

# ä¸»ç¨‹åºå¤„ç†å¤šç»„æ•°æ®
t = int(input())
for _ in range(t):
    n = int(input())
    intervals = [tuple(map(int, input().split())) for _ in range(n)]
    print(max_concurrent_connections(n, intervals))


```

âœ… **æ€»ç»“**

- æœ¬é¢˜æ˜¯å…¸å‹çš„**äº‹ä»¶æ’åº+å‰ç¼€å’Œæ¨¡æ‹Ÿ**é—®é¢˜ï¼›
- è€ƒå¯Ÿ**æ’åºè§„åˆ™ã€æ‰«æçº¿æ€æƒ³**ï¼›
- å¯ä½œä¸ºå¤„ç†â€œæ—¶é—´åŒºé—´ç»Ÿè®¡ç±»é—®é¢˜â€çš„æ¨¡æ¿ã€‚



2022fall-cs101, å«å®¶ç‡Š æ€è·¯ï¼šæ—¶åˆ»çš„æ•°å€¼å¯ä»¥è¾¾åˆ°1e9ï¼Œæ˜æ˜¾æŒ¨ä¸ªéå†æ˜¯ä¸å¯ä»¥çš„ã€‚æ³¨æ„åˆ°nçš„æ•°æ®èŒƒå›´ç‰¹åˆ«å°ï¼Œæ‰€ä»¥é—®é¢˜å¾—è§£ã€‚

æ³¨æ„åŒä¸€æ—¶åˆ»å¼€å§‹ã€ç»“æŸçš„åªè®°å¼€å§‹çš„ã€‚



2022fall-cs101, å‘¨æµ©é’§ï¼Œå…‰åç®¡ç†å­¦é™¢ã€‚æ•°å­¦è¯æ˜ï¼šè‹¥ä¸ç„¶ï¼Œåˆ™åœ¨ä¸­é—´å–åˆ°ã€‚ç”±è¿ç»­æ€§ï¼Œå–è·è¯¥ç‚¹æœ€è¿‘çš„å¼€å§‹ç«¯ç‚¹ï¼Œæ˜“çŸ¥å¹¶å‘é‡ä¸å˜ã€‚å› è€Œï¼Œæ€»å¯ä»¥æ‰¾åˆ°å¼€å§‹ç«¯ç‚¹åˆé¢˜ã€‚



2022fall-cs101, èƒ¡é–è‹‘ï¼Œç”Ÿå‘½ç§‘å­¦å­¦é™¢ã€‚æ€è·¯ï¼šä¸€å¼€å§‹ä»¥ä¸€æ®µçº¿æ®µä¸ºå‡ºå‘ç‚¹è®¡ç®—é‡å ï¼Œå‘ç°æ ¹æœ¬æ²¡åŠæ³•åšä¸‹å»ï¼Œå¡äº†å¾ˆä¹…ã€‚åæ¥è½¬æ¢ä¸€ä¸‹æ€è·¯ï¼Œç”¨ä¸€ä¸ªç«¯ç‚¹ä½œä¸ºé”šç‚¹ï¼Œå°±èƒ½ç²¾å‡†åœ°æ‰¾åˆ°æ¯ä¸€ä¸ªé‡å äº†ã€‚å¤§æ¦‚æ˜¯å› ä¸ºä¸€ä¸ªé‡å åŒºé—´ä¸­ä¸€å®šæœ‰ä¸€ä¸ªç‚¹ä¼šå®Œæ•´ç»å†æ‰€æœ‰é‡å ï¼Œä½†æ˜¯å¦‚æœæ¢æˆçº¿æ®µï¼Œåˆ°åº•æ˜¯å“ªä¸€æ®µçº¿æ®µä»£è¡¨é‡å åŒºåˆ™
å¾ˆéš¾ç¡®å®šã€‚



2022fall-cs101ï¼Œå¼ å®‡è¾°ï¼Œå…ƒåŸ¹å­¦é™¢ã€‚æœ€ä¸»è¦çš„æ€è·¯æ˜¯ï¼Œå¹¶å‘ç®—â€œå¤´â€ä¸ç®—â€œå°¾â€ï¼Œæ‰€ä»¥äº§ç”Ÿæœ€å¤§å¹¶å‘çš„æ—¶é—´æ®µä¸€å®šä¼šåŒ…æ‹¬æŸæ®µè¿›ç¨‹å¼€å§‹çš„æ—¶åˆ»ï¼Œäºæ˜¯åªè¦å¯¹å¼€å§‹æ—¶åˆ»éå†å°±å¯ä»¥äº†ã€‚

```python
# æ³¨æ„åŒä¸€æ—¶åˆ»å¼€å§‹ã€ç»“æŸçš„åªè®¡å¼€å§‹çš„ã€‚
t=int(input())
while t>0:
    t-=1
    n=int(input())
    a=[];b=[]
    for i in range(n):
        x,y=input().split()
        a.append(int(x))
        b.append(int(y))
    ans = 0
    for i in range(n):
        cnt=0
        for j in range(n):
            if a[i]>=a[j] and a[i]<b[j]:
                cnt+=1
        ans = max(ans, cnt)
    print(ans)
```



2022fall-cs101ï¼Œé™ˆæ–‡ç€šï¼Œç‰©ç†å­¦é™¢ã€‚ä¸€å¼€å§‹è‡ªå·±å»ºäº†ä¸ª10^9 å¤§å°çš„æ•°ç»„ï¼Œç›´æ¥MLE äº†ï¼Œç„¶åæ€è€ƒåˆ°ä¸Šä¸‹è½¦é—®é¢˜ï¼Œå¯ä»¥åªçœ‹æ¯ç«™ä¸Šä¸‹è½¦äººæ•°æ¥ç¡®å®šç›®å‰è½¦ä¸Šäººæ•°ã€‚



2022fall-cs101ï¼Œæ—å©§æ¶µ ä¸­å›½è¯­è¨€æ–‡å­¦ç³»ã€‚ç”¨ç¨‹åºæ¨¡æ‹Ÿæ¥å…¥ï¼ˆ+1ï¼‰ã€æ–­å¼€ï¼ˆ-1ï¼‰çš„åŠ¨æ€è¿‡ç¨‹ï¼Œè€Œæœ€å¤§å¹¶å‘é‡å°±æ˜¯è¿™ä¸€è¿‡ç¨‹ä¸­èƒ½è¾¾åˆ°çš„æœ€å¤§çš„æ•°ã€‚

```python
'''
å°†å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ä¸€èµ·è¿›è¡Œæ’åºï¼Œç„¶åé€ä¸€è¿›è¡Œåˆ¤æ–­å°±å¯ä»¥ã€‚
æ¯”å¦‚ç¬¬ä¸€ç»„ä¾‹å­
2
1 2
2 3
å¯ä»¥å¤„ç†æˆtmp=[[1,1],[2,-1],[2,1],[3,-1]]ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸¤ç»´ï¼Œç¬¬ä¸€ç»´è¡¨ç¤ºæ—¶é—´ï¼Œ
ç¬¬äºŒç»´è¡¨ç¤ºå¼€å§‹(1)æˆ–ç»“æŸ(-1)ã€‚è¿™æ ·è¿›è¡Œæ’åºåï¼Œä¾¿å¯ä»¥æ ¹æ®æ—¶é—´é¡ºåºï¼Œ
å¤„ç†å½“å‰è¿æ¥æ•°ï¼ŒåŒæ—¶æ›´æ–°æœ€å¤§å€¼ã€‚
æ³¨æ„ï¼šå› ä¸ºè¦æ±‚åŒä¸€æ—¶é—´æ—¢æœ‰æ–­å¼€åˆæœ‰å¼€å§‹æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘æ–­å¼€çš„ï¼Œæ‰€ä»¥åŒä¸€ä¸ªæ—¶é—´ï¼Œ
ç»“æŸçš„éœ€è¦æ’åœ¨å¼€å§‹ä¹‹å‰ï¼Œæ‰€ä»¥ç»“æŸç”¨-1è€Œå¼€å§‹ç”¨1ã€‚
æ’åºæ—¶é—´O(nlogn)ï¼ŒæŒ‰æ—¶é—´é¡ºåºå¤„ç†ä¸€æ¬¡ä¸ºO(n)ï¼Œæ€»çš„ä¸ºO(nlogn)
'''

t=int(input())
while t:
  t-=1
  n=int(input())
  arr=[]
  for i in range(n):
    b,e=map(int, input().split())
    arr.append([b,1])
    arr.append([e,-1])
  arr=sorted(arr)
  cur=0
  res=0
  for i in range(len(arr)):
    cur+=arr[i][1]
    res=res if res > cur else cur
  print(res)

# by é»„ä¸½æ˜ åŒ—äº¬å¤§å­¦
```



```python
# æŸ¥è¾¾é—»
from collections import defaultdict

for t in range(int(input())):
    time = defaultdict(int)

    for i in range(int(input())):
        start, end = map(int, input().split())
        time[start] += 1
        time[end] -= 1

    ans = temp = 0
    for i in sorted(time):
        temp += time[i]
        ans = max(ans, temp)

    print(ans)
```



2022fall-cs101ï¼Œé™ˆç¿å©·ï¼ŒåŒ–å­¦ä¸åˆ†å­å·¥ç¨‹å­¦é™¢ã€‚ç±»ä¼¼CF1000B: Light it up é¢˜ï¼ˆhttps://codeforces.com/problemset/problem/1000/Bï¼‰çš„æ€è·¯ï¼ˆå…ˆæ’åºï¼Œå†æŒ¨ä¸ªéå†çœ‹æ¯ä¸€åˆ»çš„â€˜å¼€â€™â€˜å…³â€™æƒ…å†µï¼‰æ‰AC äº†ã€‚ 

```python
for i in range(int(input())):
    n = int(input())
    times = []
    op = 0
    answer = []
    for ii in range(n):
        a = list(map(int, input().split()))
        times.append([a[0], 1])
        times.append([a[1], -1])
    times.sort()
    for ti in times:
        if ti[1] != -1:
            op += ti[1]
        else:
            answer.append(op)
            op += ti[1]
    print(max(answer))
```

