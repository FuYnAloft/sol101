# M28970: é¢„æµ‹èµ¢å®¶

dp, http://cs101.openjudge.cn/practice/28970/

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„numsï¼Œç©å®¶ 1 å’Œç©å®¶ 2 åŸºäºè¿™ä¸ªæ•°ç»„è®¾è®¡äº†ä¸€ä¸ªæ¸¸æˆã€‚

ç©å®¶1å’Œç©å®¶2è½®æµè¿›è¡Œè‡ªå·±çš„å›åˆï¼Œç©å®¶ 1 å…ˆæ‰‹ã€‚å¼€å§‹æ—¶ï¼Œä¸¤ä¸ªç©å®¶çš„åˆå§‹åˆ†å€¼éƒ½æ˜¯ 0 ã€‚æ¯ä¸€å›åˆï¼Œç©å®¶ä»æ•°ç»„çš„ä»»æ„ä¸€ç«¯å–ä¸€ä¸ªæ•°å­—ï¼ˆå³é¦–ä¸ªæ•°ç»„å…ƒç´ æˆ–è€…æœ«å°¾çš„æ•°ç»„å…ƒç´ ï¼‰ï¼Œå–åˆ°çš„æ•°å­—å°†ä¼šä»æ•°ç»„ä¸­ç§»é™¤ï¼ˆæ•°ç»„é•¿åº¦å‡1ï¼‰ã€‚ç©å®¶é€‰ä¸­çš„æ•°å­—å°†ä¼šåŠ åˆ°ä»–çš„å¾—åˆ†ä¸Šã€‚å½“æ•°ç»„ä¸­æ²¡æœ‰å‰©ä½™æ•°å­—å¯å–æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚

å¦‚æœç©å®¶ 1 èƒ½æˆä¸ºèµ¢å®¶ï¼Œè¿”å›trueã€‚å¦‚æœä¸¤ä¸ªç©å®¶å¾—åˆ†ç›¸ç­‰ï¼ŒåŒæ ·è®¤ä¸ºç©å®¶ 1 æ˜¯æ¸¸æˆçš„èµ¢å®¶ï¼Œä¹Ÿè¿”å›trueã€‚ä½ å¯ä»¥å‡è®¾æ¯ä¸ªç©å®¶çš„ç©æ³•éƒ½ä¼šä½¿ä»–çš„åˆ†æ•°æœ€å¤§åŒ–ã€‚

**è¾“å…¥**

ç¬¬ä¸€è¡Œä¸ºæµ‹è¯•ç»„æ•°nï¼ˆn â‰¤ 350ï¼‰ 

åé¢nè¡Œä¸ºæ•°ç»„åˆå§‹å…ƒç´ ä¸ªæ•°m ä¸ mä¸ªå…ƒç´  

1 â‰¤ m â‰¤ 20ï¼Œ 0 â‰¤ nums[i] â‰¤ 10^7

**è¾“å‡º**

å¯¹äºæ¯ä¸€ç»„æµ‹è¯•æ•°æ®ï¼Œè¾“å‡ºtrue æˆ– false

æ ·ä¾‹è¾“å…¥

```
7
3 1 5 2
4 1 5 233 7
5 242 353 531 22 231
8 231 343 63 543 54 332 541 674
3 423 552 653
11 231 343 63 543 54 332 541 674 423 552 653
6 1 1 1 1 1 1
```

æ ·ä¾‹è¾“å‡º

```
false
true
false
true
true
false
true
```

æç¤º

dp

æ¥æº

2024-TA-xjk



è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ **åšå¼ˆç±»åŠ¨æ€è§„åˆ’** é—®é¢˜ï¼Œé€šå¸¸è¢«ç§°ä¸º **â€œé¢„æµ‹èµ¢å®¶â€ï¼ˆPredict the Winnerï¼‰**ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **è®°å¿†åŒ–é€’å½’** æˆ– **åŒºé—´ DP** æ¥è§£å†³ã€‚

------

**æ ¸å¿ƒæ€æƒ³**

- æ¯ä¸ªç©å®¶éƒ½é‡‡å–æœ€ä¼˜ç­–ç•¥ã€‚
- æˆ‘ä»¬å…³å¿ƒçš„æ˜¯ï¼š**ç©å®¶1æ˜¯å¦èƒ½è·å¾— â‰¥ ç©å®¶2 çš„åˆ†æ•°**ã€‚
- ç­‰ä»·äºï¼š**ç©å®¶1çš„å¾—åˆ† - ç©å®¶2çš„å¾—åˆ† â‰¥ 0**

å®šä¹‰ä¸€ä¸ªå‡½æ•° `diff(i, j)` è¡¨ç¤ºåœ¨å­æ•°ç»„ `nums[i:j+1]` ä¸­ï¼Œå½“å‰ç©å®¶ï¼ˆæ— è®ºæ˜¯è°ï¼‰èƒ½æ¯”å¯¹æ–¹å¤šå¾—çš„æœ€å¤§åˆ†æ•°ã€‚

- å¦‚æœå½“å‰ç©å®¶æ‹¿ `nums[i]`ï¼Œé‚£ä¹ˆå¯¹æ‰‹ä¼šåœ¨ `[i+1, j]` ä¸­ç©ï¼Œæ­¤æ—¶å½“å‰ç©å®¶çš„ä¼˜åŠ¿æ˜¯ï¼š

  ```
  nums[i] - diff(i+1, j)
  ```

- å¦‚æœå½“å‰ç©å®¶æ‹¿ `nums[j]`ï¼Œé‚£ä¹ˆå¯¹æ‰‹ä¼šåœ¨ `[i, j-1]` ä¸­ç©ï¼Œæ­¤æ—¶å½“å‰ç©å®¶çš„ä¼˜åŠ¿æ˜¯ï¼š

  ```
  nums[j] - diff(i, j-1)
  ```

æ‰€ä»¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š

```
diff(i, j) = max(nums[i] - diff(i+1, j), nums[j] - diff(i, j-1))
```

è¾¹ç•Œæ¡ä»¶ï¼šå½“ `i == j` æ—¶ï¼Œ`diff(i, j) = nums[i]`

æœ€ç»ˆæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ `diff(0, n-1) >= 0` æ˜¯å¦æˆç«‹ã€‚

------

**Python å®ç°ï¼ˆå¸¦ç¼“å­˜ï¼‰**

```python
import sys
from functools import lru_cache

def can_player1_win(nums):
    n = len(nums)
    
    @lru_cache(maxsize=None)
    def diff(i, j):
        if i == j:
            return nums[i]
        return max(nums[i] - diff(i + 1, j), nums[j] - diff(i, j - 1))
    
    return diff(0, n - 1) >= 0

# ä¸»ç¨‹åºè¯»å–è¾“å…¥
input = sys.stdin.read
data = input().split()

t = int(data[0])
index = 1
results = []

for _ in range(t):
    m = int(data[index])
    index += 1
    nums = list(map(int, data[index:index + m]))
    index += m
    results.append("true" if can_player1_win(nums) else "false")

# è¾“å‡ºç»“æœ
for res in results:
    print(res)
```

------

ğŸ” ç¤ºä¾‹è§£é‡Š

ä»¥ç¬¬ä¸€ä¸ªæ ·ä¾‹ `3 1 5 2` ä¸ºä¾‹ï¼š

- æ•°ç»„æ˜¯ `[1, 5, 2]`
- ç©å®¶1å…ˆæ‰‹ï¼Œæ— è®ºæ€ä¹ˆé€‰ï¼Œç©å®¶2éƒ½èƒ½æ‹¿åˆ°æ›´é«˜çš„æ€»åˆ†ï¼ˆæ¯”å¦‚ç©å®¶1é€‰1ï¼Œç©å®¶2é€‰5ï¼Œç©å®¶1åªèƒ½æ‹¿2 â†’ 1+2=3 vs 5ï¼‰
- æ‰€ä»¥è¾“å‡º `false`

------

â±ï¸ æ—¶é—´å¤æ‚åº¦

- æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æœ€å¤šæœ‰ $ m \leq 20 $
- åŒºé—´ DP çŠ¶æ€æ•°ä¸º $ O(m^2) $ï¼Œæ¯ä¸ªçŠ¶æ€è®¡ç®— $ O(1) $
- æ€»ä½“éå¸¸é«˜æ•ˆï¼Œé€‚ç”¨äºé¢˜ç›®é™åˆ¶


